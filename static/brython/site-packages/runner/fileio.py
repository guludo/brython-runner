import browser
import io

files = self.files

def open(file, mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None):
    count = 0
    for m in 'rwxa':
        if m in mode:
            count += 1
    if count != 1:
        raise ValueError('must have exactly one of create/read/write/append mode')
    if file not in files:
        raise FileNotFoundError('No such file or directory: \'%s\'' % file)
    target_file = files[file]
    if 'r' in mode:
        if 'b' in mode:
            if target_file['type'] != 'base64':
                raise NotImplementedError('Pythonpad does not support opening text file in binary mode.')
            import base64
            b = base64.b64decode(target_file['body'])
            return io.BytesIO(b)
        else:
            if target_file['type'] != 'text':
                raise NotImplementedError('Pythonpad does not support opening binary file in text mode.')
            return io.StringIO(initial_value=target_file['body'], newline=newline)
    return stream

browser.self.openFile = open